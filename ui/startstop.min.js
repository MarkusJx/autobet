let timeDisp=document.getElementById("time"),statusinfo=document.getElementById("statusinfo");const gtanotrunningmessage=new mdc.snackbar.MDCSnackbar(document.getElementById("gta-not-running-message"));gtanotrunningmessage.timeoutMs=1e4;let paused=0,running=0,pausing=0,timer=null,time=0;function ui_keycomb_start(){startstop.disabled=!0,startTimer(),startstop.disabled=!1,startstop.innerHTML="stop",statusinfo.innerHTML="Running",statusinfo.className="text status_running maintext"}function ui_keycomb_stop(){pause(!0)}function start(){if(!gta_running)return void gtanotrunningmessage.open();startstop.disabled=!0,autobetLib.setStarting(!0);let time=15;var x=setInterval((function(){startstop.innerHTML="Starting in "+time+"s",time--,time<0&&(clearInterval(x),startTimer(),autobetLib.setStarting(!1),autobetLib.startBetting(),startstop.disabled=!1,startstop.innerHTML="stop",statusinfo.innerHTML="Running",statusinfo.className="text status_running maintext")}),1e3)}function is_paused(){pausing&&(pausing=0,startstop.disabled=!1,pauseTimer(),startstop.innerHTML="start",statusinfo.innerHTML="Stopped",statusinfo.className="text status_stopped maintext")}function pause(nstoppy){nstoppy||autobetLib.stopBetting(),pausing=1,statusinfo.innerHTML="Stopping",statusinfo.className="text status_init maintext",startstop.disabled=!0;var x=setInterval(()=>{let value;autobetLib.stopped()&&(clearInterval(x),is_paused())},1e3)}function startTimer(){paused=0,running=1,timer=setInterval(()=>{time=autobetLib.getTimeRunning(),timeDisp.innerHTML=convertToTime(time)},1e3)}function pauseTimer(){clearInterval(timer),paused=1,running=0}function convertToTime(secs){let hours=Math.floor(secs%86400/3600),minutes=Math.floor(secs%3600/60),seconds=secs%60;return hours=hours<10?"0"+hours:hours,minutes=minutes<10?"0"+minutes:minutes,seconds=seconds<10?"0"+seconds:seconds,hours+":"+minutes+":"+seconds}startstop.addEventListener("click",(function(){running?paused||pausing||pause():start()})),autobetLib.callbacks.setUiKeycombStartCallback(ui_keycomb_start),autobetLib.callbacks.setUiKeycombStopCallback(ui_keycomb_stop);